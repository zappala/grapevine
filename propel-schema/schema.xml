<?xml version="1.0" encoding="UTF-8"?>
<database name="grapevine" defaultIdMethod="native">
	<table name="conclusion" phpName="Conclusion">
		<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
		<!-- 
		one-to-many:
			source
			note
		extended by:
			person
			relationship
			event rote
			event
			fact
			name
		-->
	</table>
	<table name="note" phpName="Note">
		<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
		<column name="text" type="text" required="true" />
		<column name="conclusion_id" type="integer" required="false" />
		<column name="source_id" type="integer" required="false" />
		<foreign-key foreignTable="conclusion" onDelete="cascade">
			<reference local="conclusion_id" foreign="id" />
		</foreign-key>
		<foreign-key foreignTable="source" onDelete="cascade">
			<reference local="source_id" foreign="id" />
		</foreign-key>
	</table>
	<table name="person" phpName="Person">
		<behavior name="concrete_inheritance">
			<parameter name="extends" value="conclusion">
		</behavior>
		<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
		<column name="living" type="boolean" required="false" />
		<column name="gender" type="enum" valueSet="Male, Female, Unknown" required="false" />
		<!--
		one-to-many 
			identifier
			name
			fact
			attribution
		-->
	</table>
</database>
